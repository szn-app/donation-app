<Workflow>

  <Objective>implement CRUD operations for Postgresql schema</Objective>

  <Parameter name="schema_path" type="input" description="Postgresql schema .sql file"
    required="true" />
  <Parameter name="target_path" type="output"
    description="output directory path of generated SQL files" required="true" />

  <Execution>
    <Task id="list-schema-tables">
      <Step>list all tables in {{schema_path}} as {{table_name}} list</Step>
      <Pick>choose tables</Pick>
    </Task>

    <Task id="generate-sql-operation-per-table" dependsOn="list-schema-tables">
      <Wait />
      <Step>
        generate SQL operation in .sql files at {{target_path}} from from each table {{table_name}}
        of schema {{schema_path}}
      </Step>

      <Parameter name="table_name" type="input" description="output directory path of generated SQL"
        required="true" />
    </Task>
  </Execution>

  <Rules>
    <Rule>each .sql file must contain a single sql operation</Rule>
    <Rule>organize in folder per table</Rule>
    <Rule>SQL operation must be consistent with the schema fields and naming</Rule>
    <Rule>use fully qualified table name</Rule>
    <Rule>SELECT statements will explicitly list all fields</Rule>
    <Rule>INSERT statements will exclude any schema fields marked as generated</Rule>
    <Rule>do not use Postgresql Function, instead use standard SQL</Rule>
  </Rules>

</Workflow>